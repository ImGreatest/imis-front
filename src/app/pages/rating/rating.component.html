<div id="page">
  <div id="rating-filters">
    <div style="margin: 1rem">
      <tui-input
        [tuiTextfieldCleaner]="true"
        tuiTextfieldSize="m"
        tuiTextfieldIconLeft="tuiIconSearch"
        [style.width.px]="200"
        >Поиск</tui-input
      >
    </div>
  </div>  <tui-loader
  [overlay]="true"
  [showLoader]="!!(loading$ | async)"
  style="
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 1.5rem 20% 1.5rem 1.5rem;
  width: 100%;
"
>

    <table
      style="margin: 1rem; width: 100%"
      tuiTable
      [columns]="columns"
      [direction]="(direction$ | async) || 1"
      [tuiSortBy]="sorter$ | async"
      (directionChange)="direction$.next($event)"
      (tuiSortByChange)="sorter$.next($event!.toString())"
    >
      <thead>
        <tr tuiThGroup>
          <th *tuiHead="'Place'" tuiSortable tuiTh [sorter]="null"></th>
          <th *tuiHead="'Name'" tuiSortable tuiTh>Имя</th>
          <th *tuiHead="'Surname'" tuiSortable tuiTh>Фамилия</th>
          <th *tuiHead="'Course'" tuiSortable tuiTh>Курс</th>
          <th *tuiHead="'ratingScore'" tuiSortable tuiTh>Баллы</th>
          <th *tuiHead="'actions'" tuiTh [sorter]="null"></th>
        </tr>
      </thead>
      <tbody
        *tuiLet="users | tuiTableSort as sortedUsers"
        tuiTbody
        [data]="sortedUsers"
      >
        <tr *ngFor="let item of sortedUsers; let index = index" tuiTr>
          <td *tuiCell="'Place'" tuiTd>
            {{ index + 1 }}
          </td>
          <td *tuiCell="'Name'" tuiTd>
            {{ item.name }}
          </td>
          <td *tuiCell="'Surname'" tuiTd>
            {{ item.surname }}
          </td>
          <td *tuiCell="'Course'" tuiTd>
            {{ item.group }} {{ item.direction }}
          </td>
          <td *tuiCell="'ratingScore'" tuiTd>
            {{ item.ratingScore }}
          </td>
          <td *tuiCell="'actions'" tuiTd>
            <button
              tuiIconButton
              appearance="flat"
              tuiMode="onLight"
              icon="tuiIconMoreHorizontalLarge"
              shape="rounded"
              size="s"
              title="more"
              class="more-icon"
            ></button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="pagination-offset">
      <tui-pagination
        [index]="page$.getValue()"
        [length]="pageCount$.getValue()"
        (indexChange)="goToPage($event)"
      ></tui-pagination>
  </div></tui-loader>
</div>
